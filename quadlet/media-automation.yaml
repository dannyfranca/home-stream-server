# Media Automation Pod
# Containers: sonarr, radarr, bazarr
# These services communicate via localhost within the pod
#
# CONFIGURATION: Edit the values below before deploying
apiVersion: v1
kind: Pod
metadata:
  name: media-automation
  labels:
    app: media-automation
spec:
  containers:
    # =========================================================================
    # Sonarr - TV Show Automation
    # =========================================================================
    - name: sonarr
      image: lscr.io/linuxserver/sonarr:4.0.16.2944-ls299
      env:
        - name: PUID
          value: "1000"
        - name: PGID
          value: "1000"
        - name: TZ
          value: "Europe/London"
      ports:
        - containerPort: 8989
          hostPort: 8989
      volumeMounts:
        - name: sonarr-config
          mountPath: /config
        - name: data
          mountPath: /data

    # =========================================================================
    # Radarr - Movie Automation
    # =========================================================================
    - name: radarr
      image: lscr.io/linuxserver/radarr:6.0.4.10291-ls288
      env:
        - name: PUID
          value: "1000"
        - name: PGID
          value: "1000"
        - name: TZ
          value: "Europe/London"
      ports:
        - containerPort: 7878
          hostPort: 7878
      volumeMounts:
        - name: radarr-config
          mountPath: /config
        - name: data
          mountPath: /data

    # =========================================================================
    # Bazarr - Subtitle Downloads
    # =========================================================================
    - name: bazarr
      image: lscr.io/linuxserver/bazarr:v1.5.3-ls326
      env:
        - name: PUID
          value: "1000"
        - name: PGID
          value: "1000"
        - name: TZ
          value: "Europe/London"
      ports:
        - containerPort: 6767
          hostPort: 6767
      volumeMounts:
        - name: bazarr-config
          mountPath: /config
        - name: media
          mountPath: /data/media

  volumes:
    - name: sonarr-config
      persistentVolumeClaim:
        claimName: sonarr-config
    - name: radarr-config
      persistentVolumeClaim:
        claimName: radarr-config
    - name: bazarr-config
      persistentVolumeClaim:
        claimName: bazarr-config
    # TODO: Update this path to your data directory
    - name: data
      hostPath:
        path: /var/home/YOUR_USER/media
        type: Directory
    - name: media
      hostPath:
        path: /var/home/YOUR_USER/media/media
        type: Directory
